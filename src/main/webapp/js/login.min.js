$(function(){$(document).keydown(function(e){if(e.keyCode===13){$("#login").click()}});$("#login").click(function(){var e=$("#password").val();var g=$("#userName").val();if(d(e)||d(g)){$("#msg").text("用户名或者密码为空");$("ul").slideToggle();setTimeout(function(){$("ul").slideToggle();$("#msg").text("")},2000)}a();var f={};f.kid=$("#kid").val();f.token=$("#token").val();f.userName=g;console.log(f);c("/getTicket",f,function(h,o){var m=h.ticket;var j=CryptoJS.enc.Utf8.parse(m);var l=CryptoJS.enc.Utf8.parse(e);var i=CryptoJS.AES.encrypt(l,j,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7});var n=i.toString();var k={userName:g,kid:f.kid,pw:n,token:f.token,ticket:m};console.log(k);c("/auth",k,function(p,q){console.log(p);console.log(q)})})});function c(e,h,g){$.ajax({url:Service.servePath+e,type:"POST",async:true,data:JSON.stringify(h),cache:false,success:function(f,i){g(f,i)}})}function a(){$("#loginBox").css("display","none");$("#loading").css("display","block")}function b(){$("#loginBox").css("display","block");$("#loading").css("display","none")}function d(e){if(typeof e=="undefined"||e==null||e==""){return true}else{return false}}});